<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Adopt Me Trade System</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #0a0a0c; --card: #16161a; --accent: #00f2ff; --gold: #ffcc00; --red: #ff4d4d; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; margin: 0; padding: 0; }
        .container { padding: 15px; padding-bottom: 90px; }
        
        /* –ü—Ä–æ—Ñ–∏–ª—å –∏ –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å */
        .header { background: var(--card); border-radius: 20px; padding: 20px; border: 1px solid #333; margin-bottom: 20px; }
        .balance-box { font-size: 24px; color: var(--gold); font-weight: bold; }
        .inventory-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .pet-card { background: #222; border-radius: 12px; padding: 10px; text-align: center; border: 1px solid #444; }
        .pet-card img { width: 50px; }

        /* –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ */
        .withdraw-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 100; padding: 20px; box-sizing: border-box; text-align: center; }
        .loader { width: 100%; height: 10px; background: #333; border-radius: 5px; margin: 20px 0; overflow: hidden; }
        .progress { width: 0%; height: 100%; background: var(--accent); transition: 0.5s; }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn { background: var(--accent); color: black; border: none; padding: 12px; border-radius: 10px; width: 100%; font-weight: bold; margin-top: 5px; cursor: pointer; }
        .btn-withdraw { background: #28a745; color: white; font-size: 12px; }
        .btn-friend { background: #5865F2; color: white; margin-bottom: 10px; }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .navbar { position: fixed; bottom: 0; width: 100%; background: #111; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #333; }
        .nav-item { font-size: 20px; color: #555; }
        .nav-item.active { color: var(--accent); }
    </style>
</head>
<body>

<div class="container">
    <div id="p-main" class="tab">
        <div class="header">
            <div style="opacity: 0.6;" id="username">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="balance-box"><span id="balance">0</span> R$</div>
            <p>–£—Ä–æ–≤–µ–Ω—å: <span id="lvl" style="color:var(--accent)">1</span></p>
        </div>

        <h3>–¢–≤–æ–π –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</h3>
        <div id="inventory" class="inventory-grid">
            </div>
        
        <button class="btn" onclick="work()" id="work-btn" style="margin-top:20px">üíé –†–∞–±–æ—Ç–∞—Ç—å (+20 R$)</button>
    </div>

    <div id="p-shop" class="tab" style="display:none">
        <h3>–ú–∞–≥–∞–∑–∏–Ω</h3>
        <div class="pet-card" style="width:100%; margin-bottom:10px; display:flex; align-items:center; justify-content:space-around;">
            <img src="https://api.dicebear.com/7.x/bottts/svg?seed=wolf" alt="pet">
            <b>C–µ—Ä–±–µ—Ä</b>
            <span style="color:var(--gold)">1500 R$</span>
            <button class="btn" style="width:auto" onclick="buyPet(1500, '–°–µ—Ä–±–µ—Ä')">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="pet-card" style="width:100%; margin-bottom:10px; display:flex; align-items:center; justify-content:space-around;">
            <img src="https://api.dicebear.com/7.x/bottts/svg?seed=cat" alt="pet">
            <b>Pink Cat</b>
            <span style="color:var(--gold)">3000 R$</span>
            <button class="btn" style="width:auto" onclick="buyPet(3000, 'Pink Cat')">–ö—É–ø–∏—Ç—å</button>
        </div>
    </div>
</div>

<div id="withdraw-modal" class="withdraw-overlay">
    <h2>–í—ã–≤–æ–¥ –ü–µ—Ç–∞</h2>
    <p>–®–∞–≥ 1: –î–æ–±–∞–≤—å –≤ –¥—Ä—É–∑—å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</p>
    <div style="background:#222; padding:15px; border-radius:10px; font-weight:bold; font-size:20px; margin:10px 0; color:var(--accent)">
        MOLOPOLPKOLO1
    </div>
    <button class="btn btn-friend" onclick="tg.openLink('https://www.roblox.com/users/12345/profile')">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å Roblox</button>
    
    <div id="check-section">
        <button class="btn" onclick="startCheck()">–Ø –¥–æ–±–∞–≤–∏–ª –≤ –¥—Ä—É–∑—å—è</button>
    </div>

    <div id="status-section" style="display:none">
        <p id="status-text">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è...</p>
        <div class="loader"><div class="progress" id="bar"></div></div>
    </div>
</div>

<div class="navbar">
    <div class="nav-item active" onclick="switchTab('main')">üè†</div>
    <div class="nav-item" onclick="switchTab('shop')">üõí</div>
</div>

<script>
    let tg = window.Telegram.WebApp;
    tg.expand();

    let bal = parseInt(localStorage.getItem('b')) || 0;
    let lvl = parseInt(localStorage.getItem('l')) || 1;
    let inv = JSON.parse(localStorage.getItem('i')) || [];

    function update() {
        document.getElementById('balance').innerText = bal;
        document.getElementById('lvl').innerText = lvl;
        document.getElementById('username').innerText = tg.initDataUnsafe.user?.first_name || "–ò–≥—Ä–æ–∫";
        
        let invDiv = document.getElementById('inventory');
        invDiv.innerHTML = inv.length === 0 ? "<p style='color:#666'>–ü—É—Å—Ç–æ...</p>" : "";
        inv.forEach((pet, index) => {
            invDiv.innerHTML += `
                <div class="pet-card">
                    <b>${pet}</b><br>
                    <button class="btn btn-withdraw" onclick="openWithdraw(${index})">–í—ã–≤–µ—Å—Ç–∏</button>
                </div>
            `;
        });

        localStorage.setItem('b', bal);
        localStorage.setItem('l', lvl);
        localStorage.setItem('i', JSON.stringify(inv));
    }

    function work() {
        bal += 20;
        update();
        let btn = document.getElementById('work-btn');
        btn.disabled = true;
        setTimeout(() => btn.disabled = false, 5000);
    }

    function buyPet(price, name) {
        if (bal >= price) {
            bal -= price;
            inv.push(name);
            update();
            tg.showAlert("–ü–µ—Ç –∫—É–ø–ª–µ–Ω! –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–æ—Ñ–∏–ª—å.");
        } else {
            tg.showAlert("–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —Ä–æ–±—É–∫—Å–æ–≤!");
        }
    }

    function openWithdraw(index) {
        document.getElementById('withdraw-modal').style.display = 'block';
    }

    function startCheck() {
        document.getElementById('check-section').style.display = 'none';
        document.getElementById('status-section').style.display = 'block';
        let bar = document.getElementById('bar');
        let txt = document.getElementById('status-text');
        
        let p = 0;
        let int = setInterval(() => {
            p += 5;
            bar.style.width = p + "%";
            if(p >= 100) {
                clearInterval(int);
                txt.innerText = "–£—Å–ø–µ—à–Ω–æ! –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞—Ö–æ–¥–∞ –∞–¥–º–∏–Ω–∞ –≤ –∏–≥—Ä—É...";
                txt.style.color = "var(--gold)";
                setTimeout(() => {
                    tg.showAlert("–ê–¥–º–∏–Ω –≤ —Å–µ—Ç–∏! –ó–∞—Ö–æ–¥–∏ –≤ Adopt Me, –æ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç—Ä–µ–π–¥.");
                    document.getElementById('withdraw-modal').style.display = 'none';
                }, 4000);
            }
        }, 150);
    }

    function switchTab(t) {
        document.querySelectorAll('.tab').forEach(x => x.style.display = 'none');
        document.getElementById('p-' + t).style.display = 'block';
    }

    update();
</script>

</body>
</html>
